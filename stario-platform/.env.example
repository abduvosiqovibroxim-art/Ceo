# =============================================================================
# Stario Platform - Environment Configuration
# =============================================================================
# Copy this file to .env and fill in your values
# NEVER commit .env to version control

# -----------------------------------------------------------------------------
# Core Settings
# -----------------------------------------------------------------------------
ENVIRONMENT=development
DEBUG=true
LOG_LEVEL=INFO

# -----------------------------------------------------------------------------
# Database Configuration
# -----------------------------------------------------------------------------
DATABASE_URL=postgresql://stario:stario@localhost:5432/stario
DATABASE_POOL_SIZE=20
DATABASE_MAX_OVERFLOW=10

# -----------------------------------------------------------------------------
# Redis Configuration
# -----------------------------------------------------------------------------
REDIS_URL=redis://localhost:6379/0
REDIS_QUEUE_DB=1
REDIS_CACHE_DB=2

# -----------------------------------------------------------------------------
# S3-Compatible Storage (MinIO for dev)
# -----------------------------------------------------------------------------
S3_ENDPOINT=http://localhost:9000
S3_ACCESS_KEY=minioadmin
S3_SECRET_KEY=minioadmin
S3_BUCKET_UPLOADS=stario-uploads
S3_BUCKET_GENERATED=stario-generated
S3_BUCKET_ASSETS=stario-assets
S3_REGION=us-east-1

# -----------------------------------------------------------------------------
# Authentication & Security
# -----------------------------------------------------------------------------
JWT_SECRET=your-super-secret-jwt-key-change-in-production
JWT_ALGORITHM=HS256
JWT_ACCESS_TOKEN_EXPIRE_MINUTES=30
JWT_REFRESH_TOKEN_EXPIRE_DAYS=7

# OAuth2 Providers (optional)
GOOGLE_CLIENT_ID=
GOOGLE_CLIENT_SECRET=
TELEGRAM_BOT_TOKEN=

# Encryption
ENCRYPTION_KEY=your-32-byte-encryption-key-here

# -----------------------------------------------------------------------------
# AI Services Configuration
# -----------------------------------------------------------------------------
AI_MODE=mock  # mock | production

# LivePortrait / SadTalker (Video Animation)
LIVEPORTRAIT_ENDPOINT=http://localhost:8100
SADTALKER_ENDPOINT=http://localhost:8101

# RVC / FastSpeech2 (Voice Synthesis)
RVC_ENDPOINT=http://localhost:8102
FASTSPEECH2_ENDPOINT=http://localhost:8103

# InsightFace (Face Recognition)
INSIGHTFACE_ENDPOINT=http://localhost:8104

# SDXL (Image Generation)
SDXL_ENDPOINT=http://localhost:8105

# GPU Queue Settings
GPU_QUEUE_TIMEOUT=120
GPU_MAX_CONCURRENT_JOBS=4

# -----------------------------------------------------------------------------
# Payment Providers
# -----------------------------------------------------------------------------
# Stripe (International)
STRIPE_SECRET_KEY=sk_test_xxx
STRIPE_WEBHOOK_SECRET=whsec_xxx
STRIPE_PUBLISHABLE_KEY=pk_test_xxx

# Payme (Uzbekistan)
PAYME_MERCHANT_ID=
PAYME_SECRET_KEY=
PAYME_TEST_MODE=true

# Click (Uzbekistan)
CLICK_SERVICE_ID=
CLICK_MERCHANT_ID=
CLICK_SECRET_KEY=
CLICK_TEST_MODE=true

# VAS Billing (Mobile Operators)
VAS_PROVIDER_URL=
VAS_API_KEY=

# -----------------------------------------------------------------------------
# External Integrations
# -----------------------------------------------------------------------------
# Telegram
TELEGRAM_BOT_TOKEN=
TELEGRAM_MINIAPP_URL=https://t.me/stario_bot/app

# BoxNow Logistics (or mock)
BOXNOW_API_URL=https://api.boxnow.uz
BOXNOW_API_KEY=
LOGISTICS_MODE=mock  # mock | production

# Print-on-Demand
POD_PROVIDER_URL=
POD_API_KEY=

# -----------------------------------------------------------------------------
# Content Moderation (RegTech)
# -----------------------------------------------------------------------------
MODERATION_LLM_ENDPOINT=http://localhost:8200
MODERATION_LLM_MODEL=gpt-4
OPENAI_API_KEY=  # For LLM toxicity filter

NSFW_DETECTION_THRESHOLD=0.7
POLITICAL_CONTENT_THRESHOLD=0.8
MISINFORMATION_THRESHOLD=0.75

# Audit Log Retention (days)
AUDIT_LOG_RETENTION_DAYS=90

# -----------------------------------------------------------------------------
# Observability
# -----------------------------------------------------------------------------
# Prometheus
PROMETHEUS_ENABLED=true
PROMETHEUS_PORT=9090

# Sentry
SENTRY_DSN=
SENTRY_ENVIRONMENT=development

# Analytics
AMPLITUDE_API_KEY=
MIXPANEL_TOKEN=
FIREBASE_PROJECT_ID=

# -----------------------------------------------------------------------------
# Rate Limiting
# -----------------------------------------------------------------------------
RATE_LIMIT_REQUESTS_PER_MINUTE=60
RATE_LIMIT_REQUESTS_PER_DAY=10000
RATE_LIMIT_BURST=10

# -----------------------------------------------------------------------------
# File Upload Limits
# -----------------------------------------------------------------------------
MAX_UPLOAD_SIZE_MB=50
ALLOWED_IMAGE_TYPES=image/jpeg,image/png,image/webp
ALLOWED_VIDEO_TYPES=video/mp4,video/webm
ALLOWED_AUDIO_TYPES=audio/mp3,audio/wav,audio/ogg

# Ephemeral Upload (Face Quiz) - auto-delete after N seconds
EPHEMERAL_UPLOAD_TTL_SECONDS=3

# -----------------------------------------------------------------------------
# Service Ports (Development)
# -----------------------------------------------------------------------------
API_GATEWAY_PORT=8000
AUTH_SERVICE_PORT=8001
VIDEO_GEN_PORT=8002
VOICE_GEN_PORT=8003
FACE_SIMILARITY_PORT=8004
POSTER_GEN_PORT=8005
MERCH_ENGINE_PORT=8006
REGTECH_FILTER_PORT=8007

ADMIN_UI_PORT=4001
WEB_FRONTEND_PORT=4000
TELEGRAM_MINIAPP_PORT=4002

# -----------------------------------------------------------------------------
# Performance Settings
# -----------------------------------------------------------------------------
# Target latencies (ms)
VIDEO_GEN_TARGET_LATENCY_MS=40000
POSTER_GEN_TARGET_LATENCY_MS=5000
FACE_SIMILARITY_TARGET_LATENCY_MS=200

# Queue concurrency
WORKER_CONCURRENCY=4
MAX_QUEUE_SIZE=1000

# -----------------------------------------------------------------------------
# Uzbekistan Compliance
# -----------------------------------------------------------------------------
DATA_RESIDENCY_REGION=uz
PII_AUTO_DELETE_DAYS=30
LEGAL_EXPORT_ENABLED=true
ARTIST_VERIFICATION_REQUIRED=true
